<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Search Assortment — automotive / tyres</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fonts: Proxima Nova if installed, else Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- DataTables + Buttons -->
  <link rel="stylesheet" href="https://cdn.datatables.net/v/bs5/dt-2.0.3/b-3.0.1/fh-4.0.1/r-3.0.1/datatables.min.css"/>

  <style>
    :root {
      --bg: #0f1220;
      --card: #141a2a;
      --card-2: #181e31;
      --text: #f3f6ff;
      --text-dim: #b8c1d9;
      --border: #252c42;
      --brand: #7aa2ff;
      --brand-soft: #1a2340;
      --card-radius: 14px;
    }
    * { font-family: "Proxima Nova", Inter, "Segoe UI", Roboto, system-ui, -apple-system, Arial, sans-serif; }
    html, body { background: var(--bg); color: var(--text); }

    .page-header {
      background: radial-gradient(1200px 400px at 10% -10%, rgba(122,162,255,.25), transparent),
                  linear-gradient(90deg, var(--brand-soft), rgba(10,14,25,0.6));
      border-bottom: 1px solid var(--border);
    }
    .page-header h2 { font-weight: 700; letter-spacing:.2px; color: var(--text); }
    .muted { color: var(--text-dim); }

    .btn, .btn:focus, .btn:active { box-shadow:none; }
    .btn-outline-secondary { color: var(--text); border-color: var(--border); }
    .btn-outline-secondary:hover { background: var(--card-2); border-color: var(--border); }
    .btn-outline-primary { color: var(--text); border-color: var(--brand); }
    .btn-outline-primary:hover { background: rgba(122,162,255,.12); }

    .section-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--card-radius);
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
      padding: 1rem 1.1rem 1.25rem 1.1rem;
      height: 100%;
      contain: content;
      color: var(--text);
    }
    .section-title { font-weight: 700; font-size: 1.05rem; margin-bottom:.6rem; color: var(--text); }

    /* Executive summary pills */
    .summary-pill {
      border-radius: 999px;
      padding:.7rem 1.1rem;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--border);
      display:inline-flex; gap:.6rem; align-items:center;
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
      margin:.3rem .6rem .3rem 0;
    }
    .summary-pill .label { color: var(--text-dim); font-size:.9rem; }
    .summary-pill .value { font-weight:700; color: var(--text); font-size:1.05rem; }

    /* DataTables dark theme */
    table.dataTable { table-layout: fixed; color: var(--text); }
    table.table {
      --bs-table-color: var(--text);
      --bs-table-bg: transparent;
      --bs-table-striped-color: var(--text);
      --bs-table-hover-color: var(--text);
      --bs-table-border-color: var(--border);
      --bs-table-striped-bg: rgba(255,255,255,0.06);
      --bs-table-hover-bg: rgba(255,255,255,0.08);
    }
    /* Center headers horizontally + vertically */
    table.dataTable thead th {
      background: var(--card-2) !important;
      border-bottom: 1px solid var(--border) !important;
      color: var(--text) !important;
      text-align: center !important;
      vertical-align: middle !important;
    }
    /* Center body cells horizontally + vertically by default */
    table.dataTable tbody td {
      border-color: var(--border);
      color: var(--text);
      text-align: center;
      vertical-align: middle;
    }
    /* Override DataTables' numeric right-align helpers */
    table.dataTable td.dt-type-numeric,
    table.dataTable th.dt-type-numeric,
    table.dataTable td.dt-right,
    table.dataTable th.dt-right,
    table.dataTable td.dt-body-right,
    table.dataTable th.dt-head-right {
      text-align: center !important;
    }

    /* Inputs */
    .dataTables_wrapper .dataTables_info,
    .dataTables_wrapper .dataTables_length label,
    .dataTables_wrapper .dataTables_filter label { color: var(--text-dim); }
    .dataTables_wrapper .dataTables_filter input,
    .dataTables_wrapper .dataTables_length select {
      background: var(--card-2);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
    }
    .dataTables_wrapper .dataTables_filter input::placeholder { color: var(--text-dim); }

    /* Pagination */
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      color: var(--text) !important; border-color: var(--border) !important;
      background: transparent !important;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
      background: var(--brand-soft) !important; border-color: var(--border) !important; color: var(--text) !important;
    }

    a, a:visited { color: var(--brand); }
    a:hover { color: #aecdff; }

    /* Long text handling */
    .wrap-text { white-space: pre-wrap; line-height:1.35rem; color: var(--text); }

    /* Actionables block */
    .act {
      display: grid;
      grid-template-columns: 130px 1fr;
      align-items: center;
      column-gap: .8rem;
      background: var(--card-2); border: 1px solid var(--border);
      border-radius: 12px; padding:.65rem .8rem; color: var(--text);
      text-align: left;
    }
    .act .tag {
      justify-self: center;
      font-size:.72rem; font-weight:700; text-transform:uppercase;
      letter-spacing:.04em; color: var(--brand);
      padding:.22rem .55rem; border:1px solid var(--brand); border-radius:999px;
      background: rgba(122,162,255,.08);
    }
    .act .txt { color: var(--text); }

    /* Left-align ONLY the Actionables column */
    td.col-actionables, th.col-actionables {
      text-align: left !important;
      vertical-align: top !important;
    }

    /* PLP combined cell: stack links vertically */
    .plp-links a { display:block; line-height:1.2; margin-bottom:.25rem; }

    .footer-note { color: var(--text-dim); font-size:.85rem; }
  </style>
</head>

<body>
  <header class="page-header py-3">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-between">
        <div>
          <h2 class="mb-0">Search Assortment — automotive / tyres</h2>
          <div class="muted">Category: <strong>automotive</strong> &nbsp;|&nbsp; Subtype: <strong>tyres</strong></div>
        </div>
        <div class="text-end">
          <a class="btn btn-outline-secondary btn-sm" href="#" onclick="window.print()">Print</a>
        </div>
      </div>
    </div>
  </header>

  <main class="container my-4">

    <!-- Executive Summary -->
    <div class="section-card mb-4">
      <div class="d-flex align-items-center flex-wrap">
        <div class="summary-pill"><span class="label">Category GMV (L30D)</span><span class="value" id="pill-score">—</span></div>
        <div class="summary-pill"><span class="label">Overall Est. Search Hits (L30D)</span><span class="value" id="pill-hits">—</span></div>
        <div class="summary-pill"><span class="label">Overall Est. GMV Opportunity (L30D) </span><span class="value" id="pill-gmv">—</span></div>
        <div class="muted text-start" style="font-size:0.72em;">Results compare the top 15 products from noon and Amazon. Some brands marked as missing may appear lower 
        on noon but are present in Amazon's top 15. Est. potential GMV is estimated based on ideal search hits share on the keywords (given an ideal assortment), 
        category average conversion and Amazon's average offer price</div>
      </div>
    </div>

    <!-- Keyword level insights -->
    <div class="row g-4">
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Keyword Insights — Generic</div>
          <table id="tbl-generic" class="table table-striped table-hover w-100"></table>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Keyword Insights — Branded</div>
          <table id="tbl-branded" class="table table-striped table-hover w-100"></table>
        </div>
      </div>
    </div>

    <!-- Detailed analysis -->
    <div class="section-card mt-4">
      <div class="d-flex justify-content-between align-items-center">
        <div class="section-title mb-0">Detailed Analysis</div>
        
      </div>
      <p class="muted mb-2">Actionables per search term. Links open in a new tab.</p>
      <table id="tbl-detail" class="table table-striped table-hover w-100"></table>
    </div>

    <div class="my-4 footer-note">
      Data source: <code>noonbigmerchsandbox.satyam.search_assortment_eval_final_draft3</code>. Report for <strong>automotive × tyres</strong>. Generated on : <strong>19 Sep 2025, 06:26 PM</strong>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/v/bs5/dt-2.0.3/b-3.0.1/fh-4.0.1/r-3.0.1/datatables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <script>
    const EXEC_SUMMARY = {"overall_score": 190.0, "overall_st_hits": 949, "overall_gmv_oppt": 15064.0};
    const DATA_GENERIC = [{"search_term": "high performance car tyres", "performance": "Average (0.88)", "st_hits": 40, "gmv_oppt": 825.0, "outcome": 1}, {"search_term": "all season car tyres", "performance": "Very Poor (0.32)", "st_hits": 40, "gmv_oppt": 783.0, "outcome": 5}, {"search_term": "car tyres", "performance": "Below Average (0.78)", "st_hits": 135, "gmv_oppt": 1018.0, "outcome": 2}, {"search_term": "tire valve", "performance": "Average (0.88)", "st_hits": 27, "gmv_oppt": 20.0, "outcome": 4}, {"search_term": "17 inch car tyres", "performance": "Poor (0.61)", "st_hits": 67, "gmv_oppt": 1566.0, "outcome": 3}];
    const DATA_BRANDED = [{"search_term": "yokohama car tyres", "performance": "Poor (0.41)", "st_hits": 54, "gmv_oppt": 1339.0, "outcome": 3}, {"search_term": "bridgestone car tyres", "performance": "Poor (0.51)", "st_hits": 94, "gmv_oppt": 1344.0, "outcome": 2}, {"search_term": "michelin car tyres", "performance": "Good (0.93)", "st_hits": 81, "gmv_oppt": 230.0, "outcome": 8}, {"search_term": "goodyear car tyres", "performance": "Poor (0.58)", "st_hits": 108, "gmv_oppt": 1385.0, "outcome": 1}, {"search_term": "mrf car tyres", "performance": "Very Poor (0.36)", "st_hits": 61, "gmv_oppt": 687.0, "outcome": 5}, {"search_term": "dunlop car tyres", "performance": "Below Average (0.77)", "st_hits": 54, "gmv_oppt": 590.0, "outcome": 9}, {"search_term": "apollo car tyres", "performance": "Poor (0.62)", "st_hits": 47, "gmv_oppt": 341.0, "outcome": 4}, {"search_term": "hankook car tyres", "performance": "Below Average (0.73)", "st_hits": 67, "gmv_oppt": 1924.0, "outcome": 7}, {"search_term": "pirelli car tyres", "performance": "Below Average (0.79)", "st_hits": 74, "gmv_oppt": 3012.0, "outcome": 6}];
    const DATA_DETAIL  = [{"search_term": "yokohama car tyres", "brand_actionable": "Brand Yokohama is absent on noon but present with multiple SKUs on Amazon; noon shows no relevant Yokohama car tyres.", "assortment_actionable": "Noon lacks any Yokohama car tyre SKUs; assortment is irrelevant with only tyre inflators and accessories shown.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=yokohama%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=yokohama+car+tyres", "outcome": 3, "performance_tag": "Poor", "st_hits": 54, "gmv_oppt": 1339.0}, {"search_term": "bridgestone car tyres", "brand_actionable": "Bridgestone is present on Amazon with multiple relevant SKUs but absent on noon; noon shows no Bridgestone tyres despite keyword relevance.", "assortment_actionable": "Noon lacks Bridgestone car tyre variants completely; Amazon offers diverse Bridgestone tyre SKUs matching category and subcategory.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=bridgestone%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=bridgestone+car+tyres", "outcome": 2, "performance_tag": "Poor", "st_hits": 94, "gmv_oppt": 1344.0}, {"search_term": "michelin car tyres", "brand_actionable": "Michelin is present on both noon and Amazon with multiple SKUs; all products are relevant to automotive tyres and related accessories.", "assortment_actionable": "Noon shows fewer Michelin car tyre SKUs and more accessories than Amazon; lacks some tyre inflator variants and tyre-specific products found on Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=michelin%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=michelin+car+tyres", "outcome": 8, "performance_tag": "Good", "st_hits": 81, "gmv_oppt": 230.0}, {"search_term": "goodyear car tyres", "brand_actionable": "Goodyear is present on both noon and Amazon. Noon shows only non-tyre Goodyear products, Amazon offers many relevant Goodyear car tyres.", "assortment_actionable": "Noon lacks Goodyear car tyres in automotive tyres subcategory; Amazon shows multiple tyre variants and sizes, noon’s assortment is irrelevant to keyword.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=goodyear%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=goodyear+car+tyres", "outcome": 1, "performance_tag": "Poor", "st_hits": 108, "gmv_oppt": 1385.0}, {"search_term": "mrf car tyres", "brand_actionable": "MRF brand is present on both noon and Amazon. Noon shows 12 MRF products, but most are unrelated to car tyres, unlike Amazon which has 12 relevant MRF car tyre SKUs.", "assortment_actionable": "Noon lacks relevant MRF car tyre variants; most products are unrelated protective gear. Amazon offers diverse MRF car tyre SKUs with multiple sizes and types.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=mrf%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=mrf+car+tyres", "outcome": 5, "performance_tag": "Very Poor", "st_hits": 61, "gmv_oppt": 687.0}, {"search_term": "dunlop car tyres", "brand_actionable": "Dunlop is present on both noon and Amazon with relevant car tyre SKUs; noon has more Dunlop car tyre variants than Amazon.", "assortment_actionable": "Noon offers broader Dunlop car tyre size and model variants than Amazon, fully relevant to automotive tyres category.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=dunlop%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=dunlop+car+tyres", "outcome": 9, "performance_tag": "Below Average", "st_hits": 54, "gmv_oppt": 590.0}, {"search_term": "apollo car tyres", "brand_actionable": "Brand Apollo present on Amazon with multiple tyres; absent on noon, which shows no Apollo tyres.", "assortment_actionable": "Noon lacks Apollo car tyres entirely; assortment missing compared to Amazon's multiple Apollo tyre SKUs.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=apollo%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=apollo+car+tyres", "outcome": 4, "performance_tag": "Poor", "st_hits": 47, "gmv_oppt": 341.0}, {"search_term": "hankook car tyres", "brand_actionable": "Hankook is present on both noon and Amazon with relevant SKUs matching keyword and category.", "assortment_actionable": "Noon has fewer Hankook tyre variants than Amazon, especially in all-season and specific model types.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=hankook%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=hankook+car+tyres", "outcome": 7, "performance_tag": "Below Average", "st_hits": 67, "gmv_oppt": 1924.0}, {"search_term": "pirelli car tyres", "brand_actionable": "Brand Pirelli is present on both noon and Amazon with relevant car tyre products; noon has fewer SKUs but all are category-relevant.", "assortment_actionable": "Noon offers limited Pirelli car tyre variants compared to Amazon, lacking several sizes and types available on Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=pirelli%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=pirelli+car+tyres", "outcome": 6, "performance_tag": "Below Average", "st_hits": 74, "gmv_oppt": 3012.0}, {"search_term": "high performance car tyres", "brand_actionable": "Brands missing on noon: Goodyear, Dunlop, Pirelli, Yokohama, Forceum, P-Zero, TREFAN, JQCHY, Woscher, OurLeeme. Common brands: SONAX, AstroAI, Michelin, Generic.", "assortment_actionable": "Noon shows many irrelevant items (trolley wheels, cycle gears), fewer high-performance car tyre SKUs, limited brand diversity, and dominance of non-car tyre products.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=high%20performance%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=high+performance+car+tyres", "outcome": 1, "performance_tag": "Average", "st_hits": 40, "gmv_oppt": 825.0}, {"search_term": "all season car tyres", "brand_actionable": "Brands missing on noon: Pirelli, DELINTE, Goodyear, Hankook, Apollo, MRF, Nankang. Common brands: Michelin.", "assortment_actionable": "Noon shows mostly car covers and mats, lacks actual all season tyres; Amazon offers diverse tyre SKUs and sizes; noon assortment irrelevant to keyword.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=all%20season%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=all+season+car+tyres", "outcome": 5, "performance_tag": "Very Poor", "st_hits": 40, "gmv_oppt": 783.0}, {"search_term": "car tyres", "brand_actionable": "Brands missing on noon: MICHELIN, Apollo, Goodyear, DUNLOP, Ceat, MRF, Bridgestone. Common brands: none.", "assortment_actionable": "Noon shows mostly accessories and generic tyres, fewer actual tyre SKUs and lacks major tyre brands present on Amazon; assortment dominated by generic/unbranded items.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=car+tyres", "outcome": 2, "performance_tag": "Below Average", "st_hits": 135, "gmv_oppt": 1018.0}, {"search_term": "tire valve", "brand_actionable": "Brands missing on noon: VELEGO, CKAuto, Excefore, Keenso, TKTTBD, Vaincre, ALL-TOP, MAKINGTEC. Common brands: None.", "assortment_actionable": "Noon shows fewer branded SKUs, dominated by generic products; lacks metal valve stems and tire deflator kits present on Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=tire%20valve&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=tire+valve", "outcome": 4, "performance_tag": "Average", "st_hits": 27, "gmv_oppt": 20.0}, {"search_term": "17 inch car tyres", "brand_actionable": "Brands missing on noon: Dunlop, Winguard, Yokohama, MRF, Hankook, Debica, Maruti, Forceum, Delinte, Goodyear, Nitto. Common brands: None", "assortment_actionable": "Noon shows mostly wheel covers, brushes, and unrelated tire accessories; lacks actual 17 inch car tyres which Amazon offers in multiple brands and variants.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=17%20inch%20car%20tyres&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=17+inch+car+tyres", "outcome": 3, "performance_tag": "Poor", "st_hits": 67, "gmv_oppt": 1566.0}];

    const clean_text = (text) => term.replace(/ /g, '_')

    const linkToDetail = (term) => `<a class="kw-link" href=#${term.replace(/ /g, '_')}>${term}</a>`;

    const toNumber = (v) => {
      if (v === null || v === undefined) return NaN;
      if (typeof v === 'number') return v;
      if (typeof v === 'string') {
        const s = v.replace(/,/g, '').trim();
        return s === '' ? NaN : Number(s);
      }
      return NaN;
    };
    const fmtInt = (v) => Number.isFinite(toNumber(v)) ? toNumber(v).toLocaleString() : "—";
    const fmtNum = (v) =>
      Number.isFinite(toNumber(v))
        ? toNumber(v).toLocaleString(undefined, { minimumFractionDigits:0, maximumFractionDigits:2 })
        : "—";

    const toLink = (url, label) => {
      if (!url || typeof url !== 'string') return '';
      const safe = url.startsWith('http') ? url : null;
      return safe ? `<a href="${safe}" target="_blank" rel="noopener">${label || 'Open'}</a>` : '';
    };
    const escapeHTML = (s) =>
      String(s ?? '').replace(/[&<>"']/g, (m) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]);

    // Build single "Actionables" cell (no Show more / no clamping)
    const makeActionablesCell = (row) => {
      const items = [];
      if (row.assortment_actionable) items.push(`<div class="act"><div class="tag">Assortment</div><div class="txt wrap-text">${escapeHTML(row.assortment_actionable)}</div></div>`);
      if (row.brand_actionable) items.push(`<div class="act"><div class="tag">Brand</div><div class="txt wrap-text">${escapeHTML(row.brand_actionable)}</div></div>`);
      const content = items.join('');
      return `<div class="cell-stack"><div class="wrap-text">${content}</div></div>`;
    };

    // Helper: pick GMV opportunity from available keys (gmv_oppt preferred)
    const pickGmvOppt = (row) => {
      const v = row.gmv_oppt ?? row.gmv_loss ?? row.gmv_opportunity ?? null;
      return v;
    };

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('pill-score').textContent = fmtInt(EXEC_SUMMARY.overall_score ?? 0);
      document.getElementById('pill-hits').textContent  = fmtInt(EXEC_SUMMARY.overall_st_hits);
      document.getElementById('pill-gmv').textContent   = fmtNum(EXEC_SUMMARY.overall_gmv_oppt);

      // Generic table (center columns)
      $('#tbl-generic').DataTable({
        data: DATA_GENERIC,
        columns: [
          { title:'Search Term',     data:'search_term', className:'text-center align-middle', render:(d)=>linkToDetail(d)},
          { title:'Priority',         data:'outcome',      className:'text-center align-middle', render:(d)=>escapeHTML(d ?? '—') },
          { title:'Est. Hits',     data:'st_hits',     className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:'gmv_oppt',      className:'text-center align-middle', render:(d)=>fmtNum(d) }
        ],
        order: [[1,'asc']], responsive: true, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 10, lengthMenu: [10,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv']
      });

      // Branded table (center columns)
      $('#tbl-branded').DataTable({
        data: DATA_BRANDED,
        columns: [
          { title:'Search Term',     data:'search_term', className:'text-center align-middle', render:(d)=>linkToDetail(d) },
          { title:'Priority',         data:'outcome',      className:'text-center align-middle', render:(d)=>escapeHTML(d ?? '—') },
          { title:'Est. Hits',     data:'st_hits',     className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:'gmv_oppt',      className:'text-center align-middle', render:(d)=>fmtNum(d) }
        ],
        order: [[1,'asc']], responsive: true, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 10, lengthMenu: [10,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv']
      });

      // Detailed Analysis (center everything except Actionables)
      const dtDetail = $('#tbl-detail').DataTable({
        data: DATA_DETAIL,
        columns: [
          { title:'Search Term',     data:'search_term',   width:'10%', className:'text-center align-middle' },
          { title:'Insights',     data:null,            width:'54%', className:'col-actionables', render:(d,t,row)=>makeActionablesCell(row) },
          { title:'Est. Hits',     data:'st_hits',       width:'8%', className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:null,            width:'10%', className:'text-center align-middle', render:(d,t,row)=>fmtNum(pickGmvOppt(row)) },
          { title:'PLP',             data:null,            width:'10%', className:'text-center align-middle',
          render:(d,t,row)=>{const parts = [];
            if (row.noon_plp_link)   parts.push(toLink(row.noon_plp_link,   'noon search results'));
            if (row.amazon_plp_link) parts.push(toLink(row.amazon_plp_link, 'Amazon search results'));
            return parts.length ? '<div class="plp-links">' + parts.join('') + '</div>' : '—';
          }
          }
        ],
        order: [[3,'desc']], responsive: false, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 15, lengthMenu: [15,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv'],
        rowId: (d) => d.search_term.replace(/ /g, '_')
      });

      
    });
  </script>
</body>
</html>
