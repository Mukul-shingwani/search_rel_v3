<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Search Assortment — automotive / vacuum_cleaners</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fonts: Proxima Nova if installed, else Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- DataTables + Buttons -->
  <link rel="stylesheet" href="https://cdn.datatables.net/v/bs5/dt-2.0.3/b-3.0.1/fh-4.0.1/r-3.0.1/datatables.min.css"/>

  <style>
    :root {
      --bg: #0f1220;
      --card: #141a2a;
      --card-2: #181e31;
      --text: #f3f6ff;
      --text-dim: #b8c1d9;
      --border: #252c42;
      --brand: #7aa2ff;
      --brand-soft: #1a2340;
      --card-radius: 14px;
    }
    * { font-family: "Proxima Nova", Inter, "Segoe UI", Roboto, system-ui, -apple-system, Arial, sans-serif; }
    html, body { background: var(--bg); color: var(--text); }

    .page-header {
      background: radial-gradient(1200px 400px at 10% -10%, rgba(122,162,255,.25), transparent),
                  linear-gradient(90deg, var(--brand-soft), rgba(10,14,25,0.6));
      border-bottom: 1px solid var(--border);
    }
    .page-header h2 { font-weight: 700; letter-spacing:.2px; color: var(--text); }
    .muted { color: var(--text-dim); }

    .btn, .btn:focus, .btn:active { box-shadow:none; }
    .btn-outline-secondary { color: var(--text); border-color: var(--border); }
    .btn-outline-secondary:hover { background: var(--card-2); border-color: var(--border); }
    .btn-outline-primary { color: var(--text); border-color: var(--brand); }
    .btn-outline-primary:hover { background: rgba(122,162,255,.12); }

    .section-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--card-radius);
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
      padding: 1rem 1.1rem 1.25rem 1.1rem;
      height: 100%;
      contain: content;
      color: var(--text);
    }
    .section-title { font-weight: 700; font-size: 1.05rem; margin-bottom:.6rem; color: var(--text); }

    /* Executive summary pills */
    .summary-pill {
      border-radius: 999px;
      padding:.7rem 1.1rem;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--border);
      display:inline-flex; gap:.6rem; align-items:center;
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
      margin:.3rem .6rem .3rem 0;
    }
    .summary-pill .label { color: var(--text-dim); font-size:.9rem; }
    .summary-pill .value { font-weight:700; color: var(--text); font-size:1.05rem; }

    /* DataTables dark theme */
    table.dataTable { table-layout: fixed; color: var(--text); }
    table.table {
      --bs-table-color: var(--text);
      --bs-table-bg: transparent;
      --bs-table-striped-color: var(--text);
      --bs-table-hover-color: var(--text);
      --bs-table-border-color: var(--border);
      --bs-table-striped-bg: rgba(255,255,255,0.06);
      --bs-table-hover-bg: rgba(255,255,255,0.08);
    }
    /* Center headers horizontally + vertically */
    table.dataTable thead th {
      background: var(--card-2) !important;
      border-bottom: 1px solid var(--border) !important;
      color: var(--text) !important;
      text-align: center !important;
      vertical-align: middle !important;
    }
    /* Center body cells horizontally + vertically by default */
    table.dataTable tbody td {
      border-color: var(--border);
      color: var(--text);
      text-align: center;
      vertical-align: middle;
    }
    /* Override DataTables' numeric right-align helpers */
    table.dataTable td.dt-type-numeric,
    table.dataTable th.dt-type-numeric,
    table.dataTable td.dt-right,
    table.dataTable th.dt-right,
    table.dataTable td.dt-body-right,
    table.dataTable th.dt-head-right {
      text-align: center !important;
    }

    /* Inputs */
    .dataTables_wrapper .dataTables_info,
    .dataTables_wrapper .dataTables_length label,
    .dataTables_wrapper .dataTables_filter label { color: var(--text-dim); }
    .dataTables_wrapper .dataTables_filter input,
    .dataTables_wrapper .dataTables_length select {
      background: var(--card-2);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
    }
    .dataTables_wrapper .dataTables_filter input::placeholder { color: var(--text-dim); }

    /* Pagination */
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      color: var(--text) !important; border-color: var(--border) !important;
      background: transparent !important;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
      background: var(--brand-soft) !important; border-color: var(--border) !important; color: var(--text) !important;
    }

    a, a:visited { color: var(--brand); }
    a:hover { color: #aecdff; }

    /* Long text handling */
    .wrap-text { white-space: pre-wrap; line-height:1.35rem; color: var(--text); }

    /* Actionables block */
    .act {
      display: grid;
      grid-template-columns: 130px 1fr;
      align-items: center;
      column-gap: .8rem;
      background: var(--card-2); border: 1px solid var(--border);
      border-radius: 12px; padding:.65rem .8rem; color: var(--text);
      text-align: left;
    }
    .act .tag {
      justify-self: center;
      font-size:.72rem; font-weight:700; text-transform:uppercase;
      letter-spacing:.04em; color: var(--brand);
      padding:.22rem .55rem; border:1px solid var(--brand); border-radius:999px;
      background: rgba(122,162,255,.08);
    }
    .act .txt { color: var(--text); }

    /* Left-align ONLY the Actionables column */
    td.col-actionables, th.col-actionables {
      text-align: left !important;
      vertical-align: top !important;
    }

    /* PLP combined cell: stack links vertically */
    .plp-links a { display:block; line-height:1.2; margin-bottom:.25rem; }

    .footer-note { color: var(--text-dim); font-size:.85rem; }
  </style>
</head>

<body>
  <header class="page-header py-3">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-between">
        <div>
          <h2 class="mb-0">Search Assortment — automotive / vacuum_cleaners</h2>
          <div class="muted">Category: <strong>automotive</strong> &nbsp;|&nbsp; Subtype: <strong>vacuum_cleaners</strong></div>
        </div>
        <div class="text-end">
          <a class="btn btn-outline-secondary btn-sm" href="#" onclick="window.print()">Print</a>
        </div>
      </div>
    </div>
  </header>

  <main class="container my-4">

    <!-- Executive Summary -->
    <div class="section-card mb-4">
      <div class="d-flex align-items-center flex-wrap">
        <div class="summary-pill"><span class="label">Category GMV (L30D)</span><span class="value" id="pill-score">—</span></div>
        <div class="summary-pill"><span class="label">Overall Est. Search Hits (L30D)</span><span class="value" id="pill-hits">—</span></div>
        <div class="summary-pill"><span class="label">Overall Est. GMV Opportunity (L30D) </span><span class="value" id="pill-gmv">—</span></div>
        <div class="muted text-start" style="font-size:0.72em;">Results compare the top 15 products from noon and Amazon. Some brands marked as missing may appear lower 
        on noon but are present in Amazon's top 15. Est. potential GMV is estimated based on ideal search hits share on the keywords (given an ideal assortment), 
        category average conversion and Amazon's average offer price</div>
      </div>
    </div>

    <!-- Keyword level insights -->
    <div class="row g-4">
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Keyword Insights — Generic</div>
          <table id="tbl-generic" class="table table-striped table-hover w-100"></table>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Keyword Insights — Branded</div>
          <table id="tbl-branded" class="table table-striped table-hover w-100"></table>
        </div>
      </div>
    </div>

    <!-- Detailed analysis -->
    <div class="section-card mt-4">
      <div class="d-flex justify-content-between align-items-center">
        <div class="section-title mb-0">Detailed Analysis</div>
        
      </div>
      <p class="muted mb-2">Actionables per search term. Links open in a new tab.</p>
      <table id="tbl-detail" class="table table-striped table-hover w-100"></table>
    </div>

    <div class="my-4 footer-note">
      Data source: <code>noonbigmerchsandbox.satyam.search_assortment_eval_final_draft3</code>. Report for <strong>automotive × vacuum_cleaners</strong>. Generated on : <strong>19 Sep 2025, 06:26 PM</strong>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/v/bs5/dt-2.0.3/b-3.0.1/fh-4.0.1/r-3.0.1/datatables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <script>
    const EXEC_SUMMARY = {"overall_score": 46502.0, "overall_st_hits": 2770, "overall_gmv_oppt": 9567.0};
    const DATA_GENERIC = [{"search_term": "wet and dry car vacuum cleaner", "performance": "Average (0.89)", "st_hits": 213, "gmv_oppt": 582.0, "outcome": 3}, {"search_term": "مكنسة سيارة", "performance": "Good (0.94)", "st_hits": 85, "gmv_oppt": 199.0, "outcome": 5}, {"search_term": "cordless car vacuum cleaner", "performance": "Good (0.94)", "st_hits": 341, "gmv_oppt": 1023.0, "outcome": 2}, {"search_term": "car vacuum cleaner", "performance": "Excellent (0.96)", "st_hits": 639, "gmv_oppt": 2774.0, "outcome": 4}, {"search_term": "portable car vacuum cleaner", "performance": "Excellent (0.95)", "st_hits": 426, "gmv_oppt": 1026.0, "outcome": 1}];
    const DATA_BRANDED = [{"search_term": "baseus car vacuum cleaner", "performance": "Excellent (0.96)", "st_hits": 128, "gmv_oppt": 496.0, "outcome": 4}, {"search_term": "airbot car vacuum cleaner", "performance": "Average (0.87)", "st_hits": 64, "gmv_oppt": 397.0, "outcome": 6}, {"search_term": "karcher car vacuum cleaner", "performance": "Below Average (0.83)", "st_hits": 213, "gmv_oppt": 1105.0, "outcome": 3}, {"search_term": "blackdecker car vacuum cleaner", "performance": "Average (0.88)", "st_hits": 298, "gmv_oppt": 1079.0, "outcome": 2}, {"search_term": "xiaomi car vacuum cleaner", "performance": "Average (0.85)", "st_hits": 213, "gmv_oppt": 557.0, "outcome": 5}, {"search_term": "thisworx car vacuum cleaner", "performance": "Below Average (0.85)", "st_hits": 107, "gmv_oppt": 231.0, "outcome": 1}, {"search_term": "astroai automotive vacuum cleaner", "performance": "Below Average (0.80)", "st_hits": 13, "gmv_oppt": 29.0, "outcome": 8}, {"search_term": "autofy car vacuum cleaner", "performance": "Average (0.90)", "st_hits": 21, "gmv_oppt": 43.0, "outcome": 7}];
    const DATA_DETAIL  = [{"search_term": "baseus car vacuum cleaner", "brand_actionable": "Brand Baseus is present on both noon and Amazon with multiple SKUs, all relevant to car vacuum cleaners in automotive category.", "assortment_actionable": "Noon offers a comparable variety of Baseus car vacuum cleaners and accessories as Amazon, covering different power levels and features.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=baseus%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=baseus+car+vacuum+cleaner", "outcome": 4, "performance_tag": "Excellent", "st_hits": 128, "gmv_oppt": 496.0}, {"search_term": "airbot car vacuum cleaner", "brand_actionable": "Brand Airbot is present on both noon and Amazon with multiple SKUs; all products are relevant to automotive vacuum cleaners.", "assortment_actionable": "Noon offers more Airbot variants and diverse models than Amazon, covering cordless, robot, window cleaning, and wet/dry vacuums.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=airbot%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=airbot+car+vacuum+cleaner", "outcome": 6, "performance_tag": "Average", "st_hits": 64, "gmv_oppt": 397.0}, {"search_term": "karcher car vacuum cleaner", "brand_actionable": "Brand KARCHER is well represented on both noon and Amazon with multiple relevant SKUs matching the keyword and category.", "assortment_actionable": "Noon offers a broader range of KARCHER car vacuum variants than Amazon, covering wet/dry, cordless, and accessories.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=karcher%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=karcher+car+vacuum+cleaner", "outcome": 3, "performance_tag": "Below Average", "st_hits": 213, "gmv_oppt": 1105.0}, {"search_term": "blackdecker car vacuum cleaner", "brand_actionable": "BLACK+DECKER is fully present on noon and Amazon with strong SKU coverage; all products are relevant to blackdecker car vacuum cleaner in automotive vacuum cleaners.", "assortment_actionable": "Noon offers a wide variety of BLACK+DECKER car vacuum models matching Amazon’s assortment; no significant gaps in relevant SKU variants detected.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=blackdecker%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=blackdecker+car+vacuum+cleaner", "outcome": 2, "performance_tag": "Average", "st_hits": 298, "gmv_oppt": 1079.0}, {"search_term": "xiaomi car vacuum cleaner", "brand_actionable": "Xiaomi is present on both noon and Amazon with multiple relevant car vacuum cleaner SKUs matching the keyword and subcategory.", "assortment_actionable": "Noon offers a wide variety of Xiaomi car vacuum cleaners, including handheld and robotic types, comparable to Amazon’s assortment.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=xiaomi%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=xiaomi+car+vacuum+cleaner", "outcome": 5, "performance_tag": "Average", "st_hits": 213, "gmv_oppt": 557.0}, {"search_term": "thisworx car vacuum cleaner", "brand_actionable": "Brand ThisWorx present on noon with 1 SKU, on Amazon with 4 SKUs; all relevant to car vacuum cleaners category and subcategory.", "assortment_actionable": "Noon shows fewer ThisWorx variants (1 vs 4 on Amazon) within car vacuum cleaners; assortment depth for ThisWorx is limited on noon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=thisworx%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=thisworx+car+vacuum+cleaner", "outcome": 1, "performance_tag": "Below Average", "st_hits": 107, "gmv_oppt": 231.0}, {"search_term": "astroai automotive vacuum cleaner", "brand_actionable": "AstroAI present on both noon (1 SKU) and Amazon (1 SKU); products are relevant to automotive vacuum cleaners category.", "assortment_actionable": "Noon has only 1 AstroAI vacuum SKU matching Amazon's 1; assortment depth for AstroAI is comparable and relevant.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=astroai%20automotive%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=astroai+automotive+vacuum+cleaner", "outcome": 8, "performance_tag": "Below Average", "st_hits": 13, "gmv_oppt": 29.0}, {"search_term": "autofy car vacuum cleaner", "brand_actionable": "Brand Autofy present on both noon and Amazon with 1 SKU on Amazon and 1 on noon; noon results are relevant to keyword, category, and subcategory.", "assortment_actionable": "Noon shows 1 Autofy SKU versus 1 on Amazon; assortment depth and variant diversity for Autofy car vacuum cleaners are comparable.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=autofy%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=autofy+car+vacuum+cleaner", "outcome": 7, "performance_tag": "Average", "st_hits": 21, "gmv_oppt": 43.0}, {"search_term": "wet and dry car vacuum cleaner", "brand_actionable": "Brands missing on noon: Black+Decker, Autofy, WORKPRO, ThisWorx, Fahuac, Airbot, Karcher, Tooetoy, QYHY, Yoawllty, Huacorp. Common brands: none", "assortment_actionable": "Noon shows fewer SKUs and lacks major known brands; assortment dominated by generics and less variety; some irrelevant or unclear brand entries present.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=wet%20and%20dry%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=wet+and+dry+car+vacuum+cleaner", "outcome": 3, "performance_tag": "Average", "st_hits": 213, "gmv_oppt": 582.0}, {"search_term": "مكنسة سيارة", "brand_actionable": "Brands missing on noon: EYYA, LENND, BLACK+DECKER, AstroAI, Vcwtty, WINWEND, TDOO, ThisWorx. Common brands: Baseus.", "assortment_actionable": "Noon shows fewer SKUs and less brand diversity, with dominance of generics and some irrelevant or unclear brand products compared to Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=مكنسة%20سيارة&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=مكنسة+سيارة", "outcome": 5, "performance_tag": "Good", "st_hits": 85, "gmv_oppt": 199.0}, {"search_term": "cordless car vacuum cleaner", "brand_actionable": "Brands missing on noon: BLACK+DECKER, AstroAI, ThisWorx, Fanttik, TDOO. Common brands: Generic, Baseus.", "assortment_actionable": "Noon has fewer branded options and more generics; lacks premium brands and variety seen on Amazon; some irrelevant or unclear brand entries present.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=cordless%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=cordless+car+vacuum+cleaner", "outcome": 2, "performance_tag": "Good", "st_hits": 341, "gmv_oppt": 1023.0}, {"search_term": "car vacuum cleaner", "brand_actionable": "Brands missing on noon: EYYA, LENND, ThisWorx, IDEA-TECH, WINWEND, Xiaomi. Common brands: BLACK+DECKER.", "assortment_actionable": "Noon shows fewer SKUs and less brand diversity; dominated by generics and missing several notable brands present on Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=car+vacuum+cleaner", "outcome": 4, "performance_tag": "Excellent", "st_hits": 639, "gmv_oppt": 2774.0}, {"search_term": "portable car vacuum cleaner", "brand_actionable": "Brands missing on noon: BLACK+DECKER, EYYA, WINWEND, LENND, ThisWorx, TDOO, AstroAI. Common brands: Baseus.", "assortment_actionable": "Noon shows fewer SKUs and less brand diversity; dominated by generics; some irrelevant/no brand products; Amazon has more branded variants and recognized brands.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=portable%20car%20vacuum%20cleaner&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=portable+car+vacuum+cleaner", "outcome": 1, "performance_tag": "Excellent", "st_hits": 426, "gmv_oppt": 1026.0}];

    const clean_text = (text) => term.replace(/ /g, '_')

    const linkToDetail = (term) => `<a class="kw-link" href=#${term.replace(/ /g, '_')}>${term}</a>`;

    const toNumber = (v) => {
      if (v === null || v === undefined) return NaN;
      if (typeof v === 'number') return v;
      if (typeof v === 'string') {
        const s = v.replace(/,/g, '').trim();
        return s === '' ? NaN : Number(s);
      }
      return NaN;
    };
    const fmtInt = (v) => Number.isFinite(toNumber(v)) ? toNumber(v).toLocaleString() : "—";
    const fmtNum = (v) =>
      Number.isFinite(toNumber(v))
        ? toNumber(v).toLocaleString(undefined, { minimumFractionDigits:0, maximumFractionDigits:2 })
        : "—";

    const toLink = (url, label) => {
      if (!url || typeof url !== 'string') return '';
      const safe = url.startsWith('http') ? url : null;
      return safe ? `<a href="${safe}" target="_blank" rel="noopener">${label || 'Open'}</a>` : '';
    };
    const escapeHTML = (s) =>
      String(s ?? '').replace(/[&<>"']/g, (m) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]);

    // Build single "Actionables" cell (no Show more / no clamping)
    const makeActionablesCell = (row) => {
      const items = [];
      if (row.assortment_actionable) items.push(`<div class="act"><div class="tag">Assortment</div><div class="txt wrap-text">${escapeHTML(row.assortment_actionable)}</div></div>`);
      if (row.brand_actionable) items.push(`<div class="act"><div class="tag">Brand</div><div class="txt wrap-text">${escapeHTML(row.brand_actionable)}</div></div>`);
      const content = items.join('');
      return `<div class="cell-stack"><div class="wrap-text">${content}</div></div>`;
    };

    // Helper: pick GMV opportunity from available keys (gmv_oppt preferred)
    const pickGmvOppt = (row) => {
      const v = row.gmv_oppt ?? row.gmv_loss ?? row.gmv_opportunity ?? null;
      return v;
    };

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('pill-score').textContent = fmtInt(EXEC_SUMMARY.overall_score ?? 0);
      document.getElementById('pill-hits').textContent  = fmtInt(EXEC_SUMMARY.overall_st_hits);
      document.getElementById('pill-gmv').textContent   = fmtNum(EXEC_SUMMARY.overall_gmv_oppt);

      // Generic table (center columns)
      $('#tbl-generic').DataTable({
        data: DATA_GENERIC,
        columns: [
          { title:'Search Term',     data:'search_term', className:'text-center align-middle', render:(d)=>linkToDetail(d)},
          { title:'Priority',         data:'outcome',      className:'text-center align-middle', render:(d)=>escapeHTML(d ?? '—') },
          { title:'Est. Hits',     data:'st_hits',     className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:'gmv_oppt',      className:'text-center align-middle', render:(d)=>fmtNum(d) }
        ],
        order: [[1,'asc']], responsive: true, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 10, lengthMenu: [10,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv']
      });

      // Branded table (center columns)
      $('#tbl-branded').DataTable({
        data: DATA_BRANDED,
        columns: [
          { title:'Search Term',     data:'search_term', className:'text-center align-middle', render:(d)=>linkToDetail(d) },
          { title:'Priority',         data:'outcome',      className:'text-center align-middle', render:(d)=>escapeHTML(d ?? '—') },
          { title:'Est. Hits',     data:'st_hits',     className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:'gmv_oppt',      className:'text-center align-middle', render:(d)=>fmtNum(d) }
        ],
        order: [[1,'asc']], responsive: true, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 10, lengthMenu: [10,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv']
      });

      // Detailed Analysis (center everything except Actionables)
      const dtDetail = $('#tbl-detail').DataTable({
        data: DATA_DETAIL,
        columns: [
          { title:'Search Term',     data:'search_term',   width:'10%', className:'text-center align-middle' },
          { title:'Insights',     data:null,            width:'54%', className:'col-actionables', render:(d,t,row)=>makeActionablesCell(row) },
          { title:'Est. Hits',     data:'st_hits',       width:'8%', className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:null,            width:'10%', className:'text-center align-middle', render:(d,t,row)=>fmtNum(pickGmvOppt(row)) },
          { title:'PLP',             data:null,            width:'10%', className:'text-center align-middle',
          render:(d,t,row)=>{const parts = [];
            if (row.noon_plp_link)   parts.push(toLink(row.noon_plp_link,   'noon search results'));
            if (row.amazon_plp_link) parts.push(toLink(row.amazon_plp_link, 'Amazon search results'));
            return parts.length ? '<div class="plp-links">' + parts.join('') + '</div>' : '—';
          }
          }
        ],
        order: [[3,'desc']], responsive: false, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 15, lengthMenu: [15,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv'],
        rowId: (d) => d.search_term.replace(/ /g, '_')
      });

      
    });
  </script>
</body>
</html>
