<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Search Assortment — automotive / engine_oil</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fonts: Proxima Nova if installed, else Inter -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- DataTables + Buttons -->
  <link rel="stylesheet" href="https://cdn.datatables.net/v/bs5/dt-2.0.3/b-3.0.1/fh-4.0.1/r-3.0.1/datatables.min.css"/>

  <style>
    :root {
      --bg: #0f1220;
      --card: #141a2a;
      --card-2: #181e31;
      --text: #f3f6ff;
      --text-dim: #b8c1d9;
      --border: #252c42;
      --brand: #7aa2ff;
      --brand-soft: #1a2340;
      --card-radius: 14px;
    }
    * { font-family: "Proxima Nova", Inter, "Segoe UI", Roboto, system-ui, -apple-system, Arial, sans-serif; }
    html, body { background: var(--bg); color: var(--text); }

    .page-header {
      background: radial-gradient(1200px 400px at 10% -10%, rgba(122,162,255,.25), transparent),
                  linear-gradient(90deg, var(--brand-soft), rgba(10,14,25,0.6));
      border-bottom: 1px solid var(--border);
    }
    .page-header h2 { font-weight: 700; letter-spacing:.2px; color: var(--text); }
    .muted { color: var(--text-dim); }

    .btn, .btn:focus, .btn:active { box-shadow:none; }
    .btn-outline-secondary { color: var(--text); border-color: var(--border); }
    .btn-outline-secondary:hover { background: var(--card-2); border-color: var(--border); }
    .btn-outline-primary { color: var(--text); border-color: var(--brand); }
    .btn-outline-primary:hover { background: rgba(122,162,255,.12); }

    .section-card {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--card-radius);
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
      padding: 1rem 1.1rem 1.25rem 1.1rem;
      height: 100%;
      contain: content;
      color: var(--text);
    }
    .section-title { font-weight: 700; font-size: 1.05rem; margin-bottom:.6rem; color: var(--text); }

    /* Executive summary pills */
    .summary-pill {
      border-radius: 999px;
      padding:.7rem 1.1rem;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--border);
      display:inline-flex; gap:.6rem; align-items:center;
      box-shadow: 0 6px 16px rgba(0,0,0,.25);
      margin:.3rem .6rem .3rem 0;
    }
    .summary-pill .label { color: var(--text-dim); font-size:.9rem; }
    .summary-pill .value { font-weight:700; color: var(--text); font-size:1.05rem; }

    /* DataTables dark theme */
    table.dataTable { table-layout: fixed; color: var(--text); }
    table.table {
      --bs-table-color: var(--text);
      --bs-table-bg: transparent;
      --bs-table-striped-color: var(--text);
      --bs-table-hover-color: var(--text);
      --bs-table-border-color: var(--border);
      --bs-table-striped-bg: rgba(255,255,255,0.06);
      --bs-table-hover-bg: rgba(255,255,255,0.08);
    }
    /* Center headers horizontally + vertically */
    table.dataTable thead th {
      background: var(--card-2) !important;
      border-bottom: 1px solid var(--border) !important;
      color: var(--text) !important;
      text-align: center !important;
      vertical-align: middle !important;
    }
    /* Center body cells horizontally + vertically by default */
    table.dataTable tbody td {
      border-color: var(--border);
      color: var(--text);
      text-align: center;
      vertical-align: middle;
    }
    /* Override DataTables' numeric right-align helpers */
    table.dataTable td.dt-type-numeric,
    table.dataTable th.dt-type-numeric,
    table.dataTable td.dt-right,
    table.dataTable th.dt-right,
    table.dataTable td.dt-body-right,
    table.dataTable th.dt-head-right {
      text-align: center !important;
    }

    /* Inputs */
    .dataTables_wrapper .dataTables_info,
    .dataTables_wrapper .dataTables_length label,
    .dataTables_wrapper .dataTables_filter label { color: var(--text-dim); }
    .dataTables_wrapper .dataTables_filter input,
    .dataTables_wrapper .dataTables_length select {
      background: var(--card-2);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 10px;
    }
    .dataTables_wrapper .dataTables_filter input::placeholder { color: var(--text-dim); }

    /* Pagination */
    .dataTables_wrapper .dataTables_paginate .paginate_button {
      color: var(--text) !important; border-color: var(--border) !important;
      background: transparent !important;
    }
    .dataTables_wrapper .dataTables_paginate .paginate_button.current {
      background: var(--brand-soft) !important; border-color: var(--border) !important; color: var(--text) !important;
    }

    a, a:visited { color: var(--brand); }
    a:hover { color: #aecdff; }

    /* Long text handling */
    .wrap-text { white-space: pre-wrap; line-height:1.35rem; color: var(--text); }

    /* Actionables block */
    .act {
      display: grid;
      grid-template-columns: 130px 1fr;
      align-items: center;
      column-gap: .8rem;
      background: var(--card-2); border: 1px solid var(--border);
      border-radius: 12px; padding:.65rem .8rem; color: var(--text);
      text-align: left;
    }
    .act .tag {
      justify-self: center;
      font-size:.72rem; font-weight:700; text-transform:uppercase;
      letter-spacing:.04em; color: var(--brand);
      padding:.22rem .55rem; border:1px solid var(--brand); border-radius:999px;
      background: rgba(122,162,255,.08);
    }
    .act .txt { color: var(--text); }

    /* Left-align ONLY the Actionables column */
    td.col-actionables, th.col-actionables {
      text-align: left !important;
      vertical-align: top !important;
    }

    /* PLP combined cell: stack links vertically */
    .plp-links a { display:block; line-height:1.2; margin-bottom:.25rem; }

    .footer-note { color: var(--text-dim); font-size:.85rem; }
  </style>
</head>

<body>
  <header class="page-header py-3">
    <div class="container">
      <div class="d-flex flex-wrap align-items-center justify-content-between">
        <div>
          <h2 class="mb-0">Search Assortment — automotive / engine_oil</h2>
          <div class="muted">Category: <strong>automotive</strong> &nbsp;|&nbsp; Subtype: <strong>engine_oil</strong></div>
        </div>
        <div class="text-end">
          <a class="btn btn-outline-secondary btn-sm" href="#" onclick="window.print()">Print</a>
        </div>
      </div>
    </div>
  </header>

  <main class="container my-4">

    <!-- Executive Summary -->
    <div class="section-card mb-4">
      <div class="d-flex align-items-center flex-wrap">
        <div class="summary-pill"><span class="label">Category GMV (L30D)</span><span class="value" id="pill-score">—</span></div>
        <div class="summary-pill"><span class="label">Overall Est. Search Hits (L30D)</span><span class="value" id="pill-hits">—</span></div>
        <div class="summary-pill"><span class="label">Overall Est. GMV Opportunity (L30D) </span><span class="value" id="pill-gmv">—</span></div>
        <div class="muted text-start" style="font-size:0.72em;">Results compare the top 15 products from noon and Amazon. Some brands marked as missing may appear lower 
        on noon but are present in Amazon's top 15. Est. potential GMV is estimated based on ideal search hits share on the keywords (given an ideal assortment), 
        category average conversion and Amazon's average offer price</div>
      </div>
    </div>

    <!-- Keyword level insights -->
    <div class="row g-4">
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Keyword Insights — Generic</div>
          <table id="tbl-generic" class="table table-striped table-hover w-100"></table>
        </div>
      </div>
      <div class="col-lg-6">
        <div class="section-card">
          <div class="section-title">Keyword Insights — Branded</div>
          <table id="tbl-branded" class="table table-striped table-hover w-100"></table>
        </div>
      </div>
    </div>

    <!-- Detailed analysis -->
    <div class="section-card mt-4">
      <div class="d-flex justify-content-between align-items-center">
        <div class="section-title mb-0">Detailed Analysis</div>
        
      </div>
      <p class="muted mb-2">Actionables per search term. Links open in a new tab.</p>
      <table id="tbl-detail" class="table table-striped table-hover w-100"></table>
    </div>

    <div class="my-4 footer-note">
      Data source: <code>noonbigmerchsandbox.satyam.search_assortment_eval_final_draft3</code>. Report for <strong>automotive × engine_oil</strong>. Generated on : <strong>19 Sep 2025, 06:25 PM</strong>
    </div>
  </main>

  <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.datatables.net/v/bs5/dt-2.0.3/b-3.0.1/fh-4.0.1/r-3.0.1/datatables.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

  <script>
    const EXEC_SUMMARY = {"overall_score": 40794.0, "overall_st_hits": 5180, "overall_gmv_oppt": 12501.0};
    const DATA_GENERIC = [{"search_term": "engine oil 5w30", "performance": "Average (0.88)", "st_hits": 1072, "gmv_oppt": 1899.0, "outcome": 1}, {"search_term": "high mileage engine oil", "performance": "Average (0.85)", "st_hits": 143, "gmv_oppt": 562.0, "outcome": 4}, {"search_term": "engine oil for turbocharged cars", "performance": "Good (0.93)", "st_hits": 214, "gmv_oppt": 476.0, "outcome": 2}, {"search_term": "car oil", "performance": "Average (0.86)", "st_hits": 71, "gmv_oppt": 132.0, "outcome": 5}, {"search_term": "synthetic car engine oil", "performance": "Average (0.86)", "st_hits": 357, "gmv_oppt": 543.0, "outcome": 3}];
    const DATA_BRANDED = [{"search_term": "motul engine oil", "performance": "Good (0.92)", "st_hits": 214, "gmv_oppt": 694.0, "outcome": 10}, {"search_term": "mobil1 engine oil", "performance": "Excellent (0.96)", "st_hits": 429, "gmv_oppt": 1169.0, "outcome": 8}, {"search_term": "castrol engine oil", "performance": "Below Average (0.84)", "st_hits": 572, "gmv_oppt": 1620.0, "outcome": 7}, {"search_term": "caltex engine oil", "performance": "Average (0.85)", "st_hits": 143, "gmv_oppt": 215.0, "outcome": 5}, {"search_term": "valvoline engine oil", "performance": "Below Average (0.74)", "st_hits": 286, "gmv_oppt": 1375.0, "outcome": 2}, {"search_term": "shell engine oil", "performance": "Below Average (0.73)", "st_hits": 536, "gmv_oppt": 1128.0, "outcome": 3}, {"search_term": "acdelco engine oil", "performance": "Below Average (0.82)", "st_hits": 179, "gmv_oppt": 248.0, "outcome": 6}, {"search_term": "bmw engine oil", "performance": "Average (0.86)", "st_hits": 214, "gmv_oppt": 378.0, "outcome": 4}, {"search_term": "mobil engine oil", "performance": "Average (0.87)", "st_hits": 500, "gmv_oppt": 1151.0, "outcome": 9}, {"search_term": "liquimoly engine oil", "performance": "Poor (0.43)", "st_hits": 250, "gmv_oppt": 910.0, "outcome": 1}];
    const DATA_DETAIL  = [{"search_term": "motul engine oil", "brand_actionable": "Motul is present on both noon and Amazon with relevant engine oil SKUs matching keyword and category; noon shows 15 variants, Amazon 15 variants.", "assortment_actionable": "Noon and Amazon have similar Motul engine oil variant coverage; no significant assortment gaps detected within category and subcategory.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=motul%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=motul+engine+oil", "outcome": 10, "performance_tag": "Good", "st_hits": 214, "gmv_oppt": 694.0}, {"search_term": "mobil1 engine oil", "brand_actionable": "Mobil 1 brand is well represented on both noon and Amazon with multiple relevant SKUs matching keyword+category+subcategory.", "assortment_actionable": "Noon offers a broad range of Mobil 1 engine oil variants comparable to Amazon; no significant assortment gaps detected.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=mobil1%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=mobil1+engine+oil", "outcome": 8, "performance_tag": "Excellent", "st_hits": 429, "gmv_oppt": 1169.0}, {"search_term": "castrol engine oil", "brand_actionable": "Brand Castrol is well represented on both noon and Amazon with multiple relevant SKUs matching keyword+category+subcategory.", "assortment_actionable": "Noon shows a strong variety of Castrol engine oil variants, comparable to Amazon, covering synthetic and mineral types across sizes.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=castrol%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=castrol+engine+oil", "outcome": 7, "performance_tag": "Below Average", "st_hits": 572, "gmv_oppt": 1620.0}, {"search_term": "caltex engine oil", "brand_actionable": "Caltex is present on both noon and Amazon with multiple SKUs; all products are relevant to engine oil category and subcategory.", "assortment_actionable": "Noon has fewer Caltex engine oil variants than Amazon, missing some synthetic and diesel oil types available on Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=caltex%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=caltex+engine+oil", "outcome": 5, "performance_tag": "Average", "st_hits": 143, "gmv_oppt": 215.0}, {"search_term": "valvoline engine oil", "brand_actionable": "Valvoline is present on both noon and Amazon with multiple SKUs, all relevant to engine oil and automotive category.", "assortment_actionable": "Noon shows strong Valvoline engine oil variety but fewer synthetic and specialty variants compared to Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=valvoline%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=valvoline+engine+oil", "outcome": 2, "performance_tag": "Below Average", "st_hits": 286, "gmv_oppt": 1375.0}, {"search_term": "shell engine oil", "brand_actionable": "Brand Shell is present on both noon and Amazon with multiple SKUs relevant to engine oil category and subcategory.", "assortment_actionable": "Noon has fewer Shell Helix variants compared to Amazon, especially in fully synthetic 5W-30 and 5W-40 options.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=shell%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=shell+engine+oil", "outcome": 3, "performance_tag": "Below Average", "st_hits": 536, "gmv_oppt": 1128.0}, {"search_term": "acdelco engine oil", "brand_actionable": "Brand ACDelco is present on both noon and Amazon with multiple SKUs strictly relevant to engine oil and related products.", "assortment_actionable": "Noon shows fewer ACDelco engine oil variants than Amazon, lacking some synthetic and semi-synthetic options available on Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=acdelco%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=acdelco+engine+oil", "outcome": 6, "performance_tag": "Below Average", "st_hits": 179, "gmv_oppt": 248.0}, {"search_term": "bmw engine oil", "brand_actionable": "BMW is present on both noon (2 SKUs) and Amazon (7 SKUs) with relevant engine oil products matching keyword and category.", "assortment_actionable": "Noon has fewer BMW engine oil variants (2) compared to Amazon (7), indicating limited assortment depth for BMW engine oil.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=bmw%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=bmw+engine+oil", "outcome": 4, "performance_tag": "Average", "st_hits": 214, "gmv_oppt": 378.0}, {"search_term": "mobil engine oil", "brand_actionable": "Brand Mobil is well represented on both noon and Amazon with multiple relevant SKUs matching keyword and category.", "assortment_actionable": "Noon shows strong Mobil engine oil variants similar to Amazon; no significant assortment gaps detected.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=mobil%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=mobil+engine+oil", "outcome": 9, "performance_tag": "Average", "st_hits": 500, "gmv_oppt": 1151.0}, {"search_term": "liquimoly engine oil", "brand_actionable": "Brand LiquiMoly is present on both noon and Amazon with relevant engine oil products; noon shows fewer SKUs and some non-engine oil items.", "assortment_actionable": "Noon lacks multiple LiquiMoly engine oil variants available on Amazon; assortment is limited to cleaners and additives, missing core engine oil SKUs.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=liquimoly%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=liquimoly+engine+oil", "outcome": 1, "performance_tag": "Poor", "st_hits": 250, "gmv_oppt": 910.0}, {"search_term": "engine oil 5w30", "brand_actionable": "Brands missing on noon: Shell, Castrol, Caltex Havoline, Liqui Moly, BMW, MANNOL. Common brands: Nissan, Mobil, Toyota, Total.", "assortment_actionable": "Noon shows fewer SKUs and lacks key premium brands like Shell, Castrol, Liqui Moly; assortment less diverse with some irrelevant variants.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=engine%20oil%205w30&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=engine+oil+5w30", "outcome": 1, "performance_tag": "Average", "st_hits": 1072, "gmv_oppt": 1899.0}, {"search_term": "high mileage engine oil", "brand_actionable": "Brands missing on noon: Lucas Oil, Castrol, Mobil, Valvoline, STP, CALTEX. Common brands: RISLONE, MANNOL, V8 German Lubricants, VENOL.", "assortment_actionable": "Noon shows fewer SKUs and lacks major premium brands like Castrol, Mobil, Valvoline; assortment dominated by fewer brands and some irrelevant treatments.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=high%20mileage%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=high+mileage+engine+oil", "outcome": 4, "performance_tag": "Average", "st_hits": 143, "gmv_oppt": 562.0}, {"search_term": "engine oil for turbocharged cars", "brand_actionable": "Brands missing on noon: Shell, Liqui Moly, BMW, MANNOL, ACDelco, Bar's Leaks, Mobil 1. Common brands: DaTo, VENOL.", "assortment_actionable": "Noon shows fewer SKUs and less brand diversity; includes some irrelevant products like engine treatment; Amazon has broader synthetic oil variants for turbo cars.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=engine%20oil%20for%20turbocharged%20cars&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=engine+oil+for+turbocharged+cars", "outcome": 2, "performance_tag": "Good", "st_hits": 214, "gmv_oppt": 476.0}, {"search_term": "car oil", "brand_actionable": "Brands missing on noon: Shell, Motul, MANNOL, Infinite Power Plus, Lexus. Common brands: Castrol, Mobil, Caltex, Valvoline.", "assortment_actionable": "Noon has fewer SKUs and lacks Shell and Motul variants; assortment is less diverse with missing premium and synthetic options found on Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=car%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=car+oil", "outcome": 5, "performance_tag": "Average", "st_hits": 71, "gmv_oppt": 132.0}, {"search_term": "synthetic car engine oil", "brand_actionable": "Brands missing on noon: Castrol, Shell, Lexus, Infinite Power Plus. Common brands: MANNOL, Caltex, Mobil.", "assortment_actionable": "Noon has fewer SKUs and lacks key brands like Castrol, Shell, Lexus, limiting brand diversity and assortment variety versus Amazon.", "overall_perception": null, "noon_plp_link": "https://www.noon.com/uae-en/search/?q=synthetic%20car%20engine%20oil&av=0&e[search-ae]=google", "amazon_plp_link": "https://www.amazon.ae/s?k=synthetic+car+engine+oil", "outcome": 3, "performance_tag": "Average", "st_hits": 357, "gmv_oppt": 543.0}];

    const clean_text = (text) => term.replace(/ /g, '_')

    const linkToDetail = (term) => `<a class="kw-link" href=#${term.replace(/ /g, '_')}>${term}</a>`;

    const toNumber = (v) => {
      if (v === null || v === undefined) return NaN;
      if (typeof v === 'number') return v;
      if (typeof v === 'string') {
        const s = v.replace(/,/g, '').trim();
        return s === '' ? NaN : Number(s);
      }
      return NaN;
    };
    const fmtInt = (v) => Number.isFinite(toNumber(v)) ? toNumber(v).toLocaleString() : "—";
    const fmtNum = (v) =>
      Number.isFinite(toNumber(v))
        ? toNumber(v).toLocaleString(undefined, { minimumFractionDigits:0, maximumFractionDigits:2 })
        : "—";

    const toLink = (url, label) => {
      if (!url || typeof url !== 'string') return '';
      const safe = url.startsWith('http') ? url : null;
      return safe ? `<a href="${safe}" target="_blank" rel="noopener">${label || 'Open'}</a>` : '';
    };
    const escapeHTML = (s) =>
      String(s ?? '').replace(/[&<>"']/g, (m) => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]);

    // Build single "Actionables" cell (no Show more / no clamping)
    const makeActionablesCell = (row) => {
      const items = [];
      if (row.assortment_actionable) items.push(`<div class="act"><div class="tag">Assortment</div><div class="txt wrap-text">${escapeHTML(row.assortment_actionable)}</div></div>`);
      if (row.brand_actionable) items.push(`<div class="act"><div class="tag">Brand</div><div class="txt wrap-text">${escapeHTML(row.brand_actionable)}</div></div>`);
      const content = items.join('');
      return `<div class="cell-stack"><div class="wrap-text">${content}</div></div>`;
    };

    // Helper: pick GMV opportunity from available keys (gmv_oppt preferred)
    const pickGmvOppt = (row) => {
      const v = row.gmv_oppt ?? row.gmv_loss ?? row.gmv_opportunity ?? null;
      return v;
    };

    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('pill-score').textContent = fmtInt(EXEC_SUMMARY.overall_score ?? 0);
      document.getElementById('pill-hits').textContent  = fmtInt(EXEC_SUMMARY.overall_st_hits);
      document.getElementById('pill-gmv').textContent   = fmtNum(EXEC_SUMMARY.overall_gmv_oppt);

      // Generic table (center columns)
      $('#tbl-generic').DataTable({
        data: DATA_GENERIC,
        columns: [
          { title:'Search Term',     data:'search_term', className:'text-center align-middle', render:(d)=>linkToDetail(d)},
          { title:'Priority',         data:'outcome',      className:'text-center align-middle', render:(d)=>escapeHTML(d ?? '—') },
          { title:'Est. Hits',     data:'st_hits',     className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:'gmv_oppt',      className:'text-center align-middle', render:(d)=>fmtNum(d) }
        ],
        order: [[1,'asc']], responsive: true, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 10, lengthMenu: [10,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv']
      });

      // Branded table (center columns)
      $('#tbl-branded').DataTable({
        data: DATA_BRANDED,
        columns: [
          { title:'Search Term',     data:'search_term', className:'text-center align-middle', render:(d)=>linkToDetail(d) },
          { title:'Priority',         data:'outcome',      className:'text-center align-middle', render:(d)=>escapeHTML(d ?? '—') },
          { title:'Est. Hits',     data:'st_hits',     className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:'gmv_oppt',      className:'text-center align-middle', render:(d)=>fmtNum(d) }
        ],
        order: [[1,'asc']], responsive: true, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 10, lengthMenu: [10,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv']
      });

      // Detailed Analysis (center everything except Actionables)
      const dtDetail = $('#tbl-detail').DataTable({
        data: DATA_DETAIL,
        columns: [
          { title:'Search Term',     data:'search_term',   width:'10%', className:'text-center align-middle' },
          { title:'Insights',     data:null,            width:'54%', className:'col-actionables', render:(d,t,row)=>makeActionablesCell(row) },
          { title:'Est. Hits',     data:'st_hits',       width:'8%', className:'text-center align-middle', render:(d)=>fmtInt(d) },
          { title:'Est. GMV Potential', data:null,            width:'10%', className:'text-center align-middle', render:(d,t,row)=>fmtNum(pickGmvOppt(row)) },
          { title:'PLP',             data:null,            width:'10%', className:'text-center align-middle',
          render:(d,t,row)=>{const parts = [];
            if (row.noon_plp_link)   parts.push(toLink(row.noon_plp_link,   'noon search results'));
            if (row.amazon_plp_link) parts.push(toLink(row.amazon_plp_link, 'Amazon search results'));
            return parts.length ? '<div class="plp-links">' + parts.join('') + '</div>' : '—';
          }
          }
        ],
        order: [[3,'desc']], responsive: false, fixedHeader: false, deferRender: true, autoWidth: false,
        pageLength: 15, lengthMenu: [15,25,50,100], dom:'Bfrtip', buttons:['pageLength','copy','csv'],
        rowId: (d) => d.search_term.replace(/ /g, '_')
      });

      
    });
  </script>
</body>
</html>
